<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knockout Esports - Login</title>
    <style>
        body { font-family: sans-serif; background: #1a1a2e; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .box { background: #16213e; padding: 20px; border-radius: 10px; width: 300px; text-align: center; }
        input { width: 90%; padding: 10px; margin: 10px 0; border-radius: 5px; border: none; }
        button { width: 100%; padding: 10px; background: #e94560; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .link { margin-top: 10px; display: block; color: #ccc; text-decoration: none; font-size: 14px; }
    </style>
</head>
<body>

<div class="box">
    <h2>üöÄ ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
    <input type="email" id="email" placeholder="‡¶á‡¶Æ‡ßá‡¶á‡¶≤">
    <input type="password" id="pass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">
    <button onclick="login()">‡¶≤‡¶ó‡¶á‡¶®</button>
    <a href="/signup" class="link">‡¶®‡¶§‡ßÅ‡¶® ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®</a>
    <p id="msg" style="color: yellow; font-size: 14px;"></p>
</div>

<script>
    async function login() {
        const email = document.getElementById('email').value;
        const password = document.getElementById('pass').value;
        const msg = document.getElementById('msg');

        msg.innerText = "‡¶≤‡¶ó‡¶á‡¶® ‡¶π‡¶ö‡ßç‡¶õ‡ßá...";

        try {
            const res = await fetch('/api/auth', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ type: 'login', email, password })
            });

            const data = await res.json();

            if (res.ok) {
                msg.innerText = "‡¶∏‡¶´‡¶≤! ‡¶π‡ßã‡¶Æ‡¶™‡ßá‡¶ú‡ßá ‡¶®‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...";
                localStorage.setItem('user', JSON.stringify(data.user)); // ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡ßá‡¶≠
                window.location.href = '/home'; // ‡¶π‡ßã‡¶Æ ‡¶™‡ßá‡¶ú‡ßá ‡¶∞‡¶ø‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡ßç‡¶ü
            } else {
                msg.innerText = data.error;
            }
        } catch (err) {
            msg.innerText = "‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶è‡¶∞‡¶∞!";
        }
    }
</script>

</body>
</html>
